function getConnection() {
	current_url = window.location.href;
	url_object = new URL(current_url);
  
	protocol = url_object.protocol;
	domain = url_object.hostname;
	port = url_object.port;
  
	return `${protocol}//${domain}:${port}`;
}

const hostdomain = getConnection();

const login=document.getElementById("login"),email=document.getElementById("email"),remember=document.getElementById("rememberme"),cookieLogin="cookieLogin",requiredFields=["username","password"];!function(){const e=new URLSearchParams(window.location.search).get("email");e&&(email.value=e),""!==getCookie(cookieLogin)&&(email.value=getCookie(cookieLogin),remember.checked=!0)}(),login.addEventListener("click",(function(){let e={};storeEmailOrTriggerError("email",e,"username"),storeTextOrTriggerError("password",e,"password",6,20),isKeysInDict(e,requiredFields)?(alrtMessage.innerHTML="Successfully filled out.",swapAlert("alert-success","alert-warning"),remember.checked&&setCookie(cookieLogin,e.username,1),sendRequest("POST", hostdomain + "/login",e).then((function(e){console.log(e),"success"==e.message?(alrtMessage.innerHTML="Logged in successfully.",swapAlert("alert-success","alert-warning")):(alrtMessage.innerHTML="Failed to log in.",swapAlert("alert-warning","alert-success"))})).catch((()=>{alrtMessage.innerHTML="Server is not responding or you don't have any conection.",swapAlert("alert-warning","alert-success")}))):(alrtMessage.innerHTML="Please fill in all the required fields.",swapAlert("alert-warning","alert-success"))})),remember.addEventListener("click",(function(){remember.checked?setCookie(cookieLogin,email.value,1):deleteCookie(cookieLogin)}));
